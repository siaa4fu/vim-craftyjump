call themis#option('runtimepath', fnamemodify(expand('<sfile>'), ':h:h'))

call themis#helper('command').with(themis#helper('assert'))

" @param {string} expr - get the position for {expr} (for possible strings of {expr} see line())
" @param {list<number>} expect - [lnum, col] of expected position
"                                the column number is a 1-based character index, not a byte index
call themis#helper#expect#define_matcher('to_be_at_position',
      \ { expr, expect -> getcharpos(expr)[1:2] ==# expect },
      \ { not, name, expr, expect -> printf(
      \   'Expected the ''%s'' position %s to be at %s. (but %s)',
      \   expr,
      \   not ? 'not ' : '',
      \   string(expect),
      \   string(getcharpos(expr)[1:2])
      \ )}
      \)
